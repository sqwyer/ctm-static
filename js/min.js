function generateId(){let e=String.fromCharCode(Math.floor(25*Math.random()+65));do{let t=Math.floor(42*Math.random()+48);(t<58||t>64)&&(e+=String.fromCharCode(t))}while(e.length<32);return e}function pair(e){e.sort(((e,t)=>Number(t.rating)-Number(e.rating)));let t=[];e.length%2!=0&&(t.push([e[e.length-1],{player:null,rating:null,score:null,id:null}]),e.splice(e.length,1));let r=[e.splice(0,e.length/2),e];for(let e=0;e<r[0].length;e++)t.unshift([r[0][e],r[1][e]]);return t}class Round{constructor(e,t,r){this.players=[],this.active=!0,this.parent=e,this.id=r||generateId(),this.players=t,this.pair()}genPairs(){return pair(this.players)}setPairs(e){this.pairings=e}pair(){let e=pair(this.players);return this.pairings=e,e}generateDOMElement(e){let t=generateTable(this.pairings.map((e=>{let t=e=>null==e||null==e;return t(e[0].score)&&(e[0].score=0),t(e[1].score)&&(e[1].score=0),t(e[0].name)&&(e[0].name="Waiting"),t(e[1].name)&&(e[1].name="Waiting"),["x.",e[0].score,e[0].name,e[1].score,e[1].name]})),["Board","Black Score","Black Player","White Score","White Player"]);return t.id=this.id,e&&document.getElementById(this.id)&&document.getElementById(this.id).replaceWith(t),t}extractParent(){return this.parent}}function generateTable(e,t){let r=document.createElement("table");if(t&&t.length>0){let e=document.createElement("tr");for(let r=0;r<t.length;r++){let n=document.createElement("th");n.innerText=t[r].toString(),e.appendChild(n)}r.appendChild(e)}for(let t=0;t<e.length;t++){let n=e[t],i=document.createElement("tr");for(let e=0;e<n.length;e++){let t=document.createElement("td");t.innerText=n[e].toString(),i.appendChild(t)}r.appendChild(i)}return r}class Tourney{constructor(e){this.rounds=[],this.players=[],this.options=e}Round(e){return new Round(this,this.getActivePlayers(),e||void 0)}Player(e){return Object.assign(Object.assign({},e),{id:generateId()})}getPlayer(e){return this.players.find((t=>t.id===e))}getActivePlayers(){return this.players.filter((e=>!0===e.active))}getPlayerPool(){return this.players}addPlayer(e){if(this.getPlayer(e.id))throw new Error("A user with this ID already exists.");this.players.push(e)}}